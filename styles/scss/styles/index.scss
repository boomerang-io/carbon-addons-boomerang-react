/**
 * Copyright IBM Corp. 2016, 2018
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

// Defaults
$use-theme-boomerang: false !default;

// ====================//
// Imports and Exports //
// ====================//
@use "sass:map";
@use '@carbon/styles/scss/theme' as theme;
@use '@carbon/react/scss/components/button/tokens' as button-tokens;
@use 'config' as *;

@use "./themes/default" as theme-default;
@use "./themes/boomerang" as theme-boomerang;
@use "./themes/shell-tokens" as shell;
@use "./utils";

// Import local styles for custom components
@use '../components/AboutPlatform/aboutPlatform';
@use '../components/AutoSuggest/autoSuggest';
@use '../components/Avatar/avatar';
@use '../components/CheckboxList/checkboxList';
@use '../components/ComboBox/combobox';
@use '../components/ComboBoxMultiSelect/comboBoxMultiSelect';
@use '../components/ConfirmModal/confirmModal';
@use '../components/Creatable/creatable';
@use '../components/DateInput/dateInput';
@use '../components/Feedback/feedback';
@use '../components/DecisionButtons/decisionButtons';
@use '../components/DynamicFormik/dynamicFormik';
@use '../components/ErrorMessage/errorMessage';
@use '../components/ErrorBoundary/errorBoundary';
@use '../components/ErrorDragon/errorDragon';
@use '../components/ErrorPage/errorPage';
@use '../components/ErrorPageCore/errorPageCore';
@use '../components/FeatureHeader/featureHeader';
@use '../components/FeatureNavTab/featureNavTab';
@use '../components/FeatureNavTabs/featureNavTabs';
@use '../components/FeatureSideNav/featureSideNav';
@use '../components/FeatureSideNavLink/featureSideNavLink';
@use '../components/GdprRedirectModal/gdprRedirectModal';
@use '../components/Header/header';
@use '../components/Header/headerDropDown';
@use '../components/HeaderMenuItem/headerMenuItem';
@use '../components/HeaderMenuUser/headerMenuUser';
@use '../components/LeftSideNav/leftSideNav';
@use '../components/LoadingAnimation/loadingAnimation';
@use '../components/MemberBar/memberBar';
@use '../components/Modal/modal' as addons-modal;
@use '../components/ModalConfirmEdit/modalConfirmEdit';
@use '../components/Notifications/notifications';
@use '../components/NoDisplay/noDisplay';
@use '../components/OptionsGrid/optionsGrid';
@use '../components/PlatformBanner/platformBanner';
@use '../components/PlatformNotifications/platformNotifications';
@use '../components/PrivacyStatement/privacyStatement';
@use '../components/ProfileSettings/profileSettings';
@use '../components/ProtectedRoute/protectedRoute';
@use '../components/RadioGroup/radioGroup';
@use '../components/Sidenav/sidenav';
@use '../components/SignOut/signOut';
@use '../components/TextArea/textArea';
@use '../components/TextInput/textInput';
@use '../components/Toggle/toggle' as addons-toggle;
@use '../components/TooltipHover/tooltip' as addons-tooltip;
@use '../components/UserRequests/userRequests';

// UIShell tokens
:root {
  @include utils.create-properties(theme-default.$shell-tokens);
}

// Styles for the UIShell from addons
.#{$prefix}--bmrg-aboutPlatform-container,
.#{$prefix}--bmrg-contact-us-container,
.#{$prefix}--bmrg-feedback-container,
.#{$prefix}--bmrg-privacy-statement-container,
.#{$prefix}--bmrg-profile-settings-container,
.#{$prefix}--bmrg-report-bug-container,
.#{$prefix}--bmrg-signout-container,
.#{$prefix}--bmrg-redirect-container {
  .#{$prefix}--modal-container {
    background-color: shell.$bmrg-header-modal-background-color;
    border-radius: var(--cds-border-radius, 0);

    * {
      &:focus,
      &::before {
        outline-color: shell.$bmrg-secondary-color !important;
        border-color: shell.$bmrg-secondary-color !important;
      }
    }

    .#{$prefix}--btn:focus {
      outline-color: shell.$bmrg-primary-color;
    }

    .#{$prefix}--modal-content {
      color: var(--cds-text-on-color);
      padding: 0 1rem;
    }
  }

  .#{$prefix}--modal {
    background-color: shell.$bmrg-header-modal-overlay; //default isrgba(theme.$layer-accent-01, 0.5)
  }
  .#{$prefix}--modal-close {
    &:hover {
      background-color: shell.$bmrg-header-hover-background-color;
    }
    &:focus {
      outline: rem(1px) solid shell.$bmrg-secondary-color;
    }
  }

  .#{$prefix}--modal-content {
    width: 100%;
  }

  .#{$prefix}--modal-header__label {
    color: theme.$text-on-color;
    text-transform: initial;
  }

  .#{$prefix}--modal-header__heading {
    height: rem(26px);
    color: shell.$bmrg-brand-white;
    font-size: rem(20px);
    font-weight: 300;
  }

  .#{$prefix}--modal-close__icon {
    svg,
    polygon,
    path {
      fill: shell.$bmrg-brand-white;
    }
  }
  .#{$prefix}--modal-footer {
    background-color: shell.$bmrg-primary-color;
    margin: 0;
    /** carbon 10 override */
    padding: 0;
    position: absolute;
    bottom: 0;
    width: 100%;
    left: 0;

    .#{$prefix}--btn {
      border-radius: 0;

      &.#{$prefix}--btn--primary {
        border-bottom-right-radius: rem(4px);

        &.#{$prefix}--btn:disabled {
          opacity: 0.5;
          border: unset;
        }
      }

      &.#{$prefix}--btn--secondary {
        border-bottom-left-radius: rem(4px);
      }
    }
  }

  .#{$prefix}--accordion__heading {
    &:hover:before {
      background-color: shell.$bmrg-header-hover-background-color;
    }

    &:focus:before {
      border-color: shell.$bmrg-secondary-color;
    }
  }
}

// Styles for Boomerang theme
@if ($use-theme-boomerang) {
  // Some additional overrides to carbon base styles
  // add :root to have a higher level of specificity and not rely in import order

  :root[data-carbon-theme="boomerang"] {
    @include utils.create-properties(theme-boomerang.$shell-tokens);

    button,
    html [type="button"],
    [type="reset"],
    [type="submit"] {
      appearance: none;
    }

    .#{$prefix}--btn {
      border-radius: var(--cds-border-radius, 0);
    }

    .#{$prefix}--tooltip {
      z-index: 9999;
    }

    .#{$prefix}--loading-overlay {
      //harcoded to the RGBA value of the ui-background variable
      background-color: rgba(242, 244, 248, 0.5);
    }

    .#{$prefix}--skeleton {
      .#{$prefix}--data-table-header,
      .#{$prefix}--table-toolbar {
        display: none;
      }
    }

    .#{$prefix}--form-item {
      .#{$prefix}--text-input,
      .#{$prefix}--text-area,
      .#{$prefix}--number input[type="number"] {
        border: none;
        border-bottom: none;
        border-radius: var(--cds-border-radius, 0);
      }
    }

    .#{$prefix}--date-picker__input,
    .#{$prefix}--dropdown,
    .#{$prefix}--dropdown-text,
    .#{$prefix}--overflow-menu-options,
    .#{$prefix}--select-input,
    .#{$prefix}--search .#{$prefix}--search-input,
    .#{$prefix}--list-box,
    .#{$prefix}--list-box input[role="combobox"],
    .#{$prefix}--list-box__field[aria-expanded="true"],
    .#{$prefix}--list-box__field,
    .#{$prefix}--text-area,
    .#{$prefix}--text-input {
      border: none;
      border-radius: var(--cds-border-radius, 0);
    }

    .#{$prefix}--text-area__wrapper {
      width: 100%;
    }

    .#{$prefix}--form-requirement {
      color: theme.$support-error;
      &::before {
        content: "";
      }
    }

    .#{$prefix}--label,
    .#{$prefix}--list-box__label {
      color: theme.$text-primary;
      font-family: "IBM Plex Sans", "Helvetica Neue", Arial, Helvetica, sans-serif;
    }

    .#{$prefix}--modal-container {
      border-radius: var(--cds-border-radius, 0);
    }

    .#{$prefix}--modal-footer {
      border-bottom-right-radius: var(--cds-border-radius, 0);
      border-bottom-left-radius: var(--cds-border-radius, 0);
      .#{$prefix}--btn {
        border-radius: 0;

        &:first-child {
          border-bottom-left-radius: var(--cds-border-radius, 0);
        }

        &:last-child {
          border-bottom-right-radius: var(--cds-border-radius, 0);
        }

        &:last-child:first-child {
          border-bottom-left-radius: 0;
        }
      }
    }

    .#{$prefix}--search--xl {
      .#{$prefix}--search-input,
      .#{$prefix}--search-close {
        height: 2.5rem;
      }
    }

    // .#{$prefix}--btn--field {
    //   height: 2.5rem;
    //   min-height: 2.5rem;
    // }

    .#{$prefix}--checkbox-label::before {
      border-radius: 0.15rem;
    }

    .#{$prefix}--checkbox:checked:focus + .#{$prefix}--checkbox-label:before,
    .#{$prefix}--checkbox:focus + .#{$prefix}--checkbox-label:before {
      border-color: #005d5d;
    }

    .#{$prefix}--checkbox:checked + .#{$prefix}--checkbox-label::before {
      background-color: theme.$support-success;
      border-color: theme.$support-success;
    }

    .#{$prefix}--list-box--expanded .#{$prefix}--list-box__menu {
      max-height: 24rem;
    }

    .#{$prefix}--tooltip__trigger.#{$prefix}--tooltip__trigger--definition {
      border-bottom: none;
    }

    .#{$prefix}--tag {
      font-size: 0.75rem;
    }

    .#{$prefix}--side-nav__item--large.#{$prefix}--side-nav__submenu {
      height: 3rem;
    }

    // DataTable Overrides
    .#{$prefix}--data-table:not(.#{$prefix}--skeleton)
      th:first-of-type:not(.#{$prefix}--table-expand):not(.#{$prefix}--table-column-checkbox) {
      padding-left: 0;
    }

    .#{$prefix}--data-table .#{$prefix}--table-header-label {
      padding: 0.875rem 1rem;
    }

    .#{$prefix}--table-sort {
      padding: 0 1rem 0 0;
    }

    .#{$prefix}--data-table:not(.#{$prefix}--skeleton) th:not(.#{$prefix}--table-column-checkbox) {
      padding: 0;
    }

    .#{$prefix}--data-table td {
      max-width: 20rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }
}
